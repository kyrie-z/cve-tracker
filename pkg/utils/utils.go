package utils

import (
	"encoding/json"
	"time"
)

// Check if in list
func IsContain(items []string, item string) bool {
	for _, eachItem := range items {
		if eachItem == item {
			return true
		}
	}
	return false
}

//  Convert any type to string
func ToString(v interface{}) string {
	data, _ := json.Marshal(v)
	return string(data)
}

func NowTime() string {
	return time.Now().Format("2006-01-02 15:04:05")
}

//获取周内已过日期
func WeekDone() (day []string) {
	now := time.Now()
	offset := int(1 - now.Weekday())
	if offset > 0 {
		offset = -6
	}
	day = make([]string, 7, 7)
	for i := 0; i < 7; i++ {
		if offset <= 0 {
			dayTime := time.Date(now.Year(), now.Month(), now.Day(), 0, 0, 0, 0, time.Local).AddDate(0, 0, offset)
			day[i] = (dayTime.Format("2006/01/02"))
			offset += 1
		} else {
			return day
		}
	}

	return day
}

//周日期查询 上周(-1) 本周(0)
func WeekDate(flag int) (mon, sun string) {
	now := time.Now()
	offset := int(time.Monday - now.Weekday())
	if offset > 0 {
		offset = -6
	}
	var monOffset int
	var sunOffset int
	if flag == -1 {
		monOffset = offset - 7
		sunOffset = offset - 1
	} else if flag == 0 {
		monOffset = offset
		sunOffset = 0
	}
	monTime := time.Date(now.Year(), now.Month(), now.Day(), 0, 0, 0, 0, time.Local).AddDate(0, 0, monOffset)
	mon = monTime.Format("2006/01/02")
	sunTime := time.Date(now.Year(), now.Month(), now.Day(), 0, 0, 0, 0, time.Local).AddDate(0, 0, sunOffset)
	sun = sunTime.Format("2006/01/02")
	return
}
